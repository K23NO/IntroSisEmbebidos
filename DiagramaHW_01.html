<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Título -->
  <text x="600" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#2c3e50">Sistema de Monitoreo Respiratorio - Diagrama de Conexiones</text>
  
  <!-- PSoC 5LP (Controlador Principal) -->
  <rect x="450" y="200" width="120" height="80" fill="#3498db" stroke="#2c3e50" stroke-width="2"/>
  <text x="510" y="225" text-anchor="middle" font-size="12" font-weight="bold" fill="white">PSoC 5LP</text>
  <text x="510" y="240" text-anchor="middle" font-size="10" fill="white">Controlador</text>
  <text x="510" y="255" text-anchor="middle" font-size="10" fill="white">Principal</text>
  <text x="510" y="270" text-anchor="middle" font-size="8" fill="white">(Programado en C)</text>
  
  <!-- ATmega328P -->
  <rect x="750" y="200" width="120" height="80" fill="#e74c3c" stroke="#2c3e50" stroke-width="2"/>
  <text x="810" y="225" text-anchor="middle" font-size="12" font-weight="bold" fill="white">ATmega328P</text>
  <text x="810" y="240" text-anchor="middle" font-size="10" fill="white">Control LCD</text>
  <text x="810" y="255" text-anchor="middle" font-size="10" fill="white">e Interrupciones</text>
  <text x="810" y="270" text-anchor="middle" font-size="8" fill="white">(Assembly)</text>
  
  <!-- MAX30100 (I2C Master) -->
  <rect x="200" y="100" width="100" height="60" fill="#f39c12" stroke="#2c3e50" stroke-width="2"/>
  <text x="250" y="120" text-anchor="middle" font-size="11" font-weight="bold" fill="white">MAX30100</text>
  <text x="250" y="135" text-anchor="middle" font-size="9" fill="white">I2C Master</text>
  <text x="250" y="150" text-anchor="middle" font-size="8" fill="white">SpO2 & HR</text>
  
  <!-- BMP280 -->
  <rect x="200" y="200" width="100" height="60" fill="#9b59b6" stroke="#2c3e50" stroke-width="2"/>
  <text x="250" y="220" text-anchor="middle" font-size="11" font-weight="bold" fill="white">BMP280</text>
  <text x="250" y="235" text-anchor="middle" font-size="9" fill="white">I2C Slave</text>
  <text x="250" y="250" text-anchor="middle" font-size="8" fill="white">Presión Atm.</text>
  
  <!-- YF-S401 -->
  <rect x="200" y="300" width="100" height="60" fill="#27ae60" stroke="#2c3e50" stroke-width="2"/>
  <text x="250" y="320" text-anchor="middle" font-size="11" font-weight="bold" fill="white">YF-S401</text>
  <text x="250" y="335" text-anchor="middle" font-size="9" fill="white">Flujo Aire</text>
  <text x="250" y="350" text-anchor="middle" font-size="8" fill="white">Salida Digital</text>
  
  <!-- LCD 16x2 con I2C -->
  <rect x="950" y="100" width="100" height="60" fill="#34495e" stroke="#2c3e50" stroke-width="2"/>
  <text x="1000" y="120" text-anchor="middle" font-size="11" font-weight="bold" fill="white">LCD 16x2</text>
  <text x="1000" y="135" text-anchor="middle" font-size="9" fill="white">con I2C</text>
  <text x="1000" y="150" text-anchor="middle" font-size="8" fill="white">Display</text>
  
  <!-- Laptop/PC -->
  <rect x="450" y="400" width="120" height="60" fill="#7f8c8d" stroke="#2c3e50" stroke-width="2"/>
  <text x="510" y="425" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Laptop/PC</text>
  <text x="510" y="440" text-anchor="middle" font-size="10" fill="white">Interfaz</text>
  <text x="510" y="455" text-anchor="middle" font-size="8" fill="white">Usuario</text>
  
  <!-- Conexiones I2C Bus (MAX30100 como Master) -->
  <line x1="300" y1="130" x2="450" y2="130" stroke="#e67e22" stroke-width="3"/>
  <line x1="300" y1="230" x2="450" y2="230" stroke="#e67e22" stroke-width="3"/>
  <line x1="450" y1="130" x2="450" y2="230" stroke="#e67e22" stroke-width="3"/>
  <line x1="450" y1="180" x2="450" y2="200" stroke="#e67e22" stroke-width="3"/>
  
  <!-- Conexión I2C al ATmega328P para LCD -->
  <line x1="570" y1="180" x2="750" y2="180" stroke="#e67e22" stroke-width="3"/>
  <line x1="870" y1="180" x2="950" y2="180" stroke="#e67e22" stroke-width="3"/>
  <line x1="870" y1="180" x2="870" y2="200" stroke="#e67e22" stroke-width="3"/>
  
  <!-- Conexión YF-S401 (Digital) al PSoC -->
  <line x1="300" y1="330" x2="450" y2="330" stroke="#16a085" stroke-width="3"/>
  <line x1="450" y1="330" x2="450" y2="280" stroke="#16a085" stroke-width="3"/>
  
  <!-- Comunicación PSoC - ATmega328P (SPI/UART) -->
  <line x1="570" y1="240" x2="750" y2="240" stroke="#8e44ad" stroke-width="3"/>
  
  <!-- Comunicación PSoC - Laptop (USB/UART) -->
  <line x1="510" y1="280" x2="510" y2="400" stroke="#3498db" stroke-width="3"/>
  
  <!-- Etiquetas de buses -->
  <text x="375" y="125" font-size="10" fill="#e67e22" font-weight="bold">I2C Bus</text>
  <text x="375" y="138" font-size="8" fill="#e67e22">(SDA/SCL)</text>
  
  <text x="325" y="345" font-size="10" fill="#16a085" font-weight="bold">Digital Out</text>
  
  <text x="660" y="235" font-size="10" fill="#8e44ad" font-weight="bold">SPI/UART</text>
  
  <text x="520" y="340" font-size="10" fill="#3498db" font-weight="bold">USB/UART</text>
  
  <!-- Pines específicos -->
  <text x="320" y="110" font-size="8" fill="#2c3e50">VCC: 3.3V</text>
  <text x="320" y="175" font-size="8" fill="#2c3e50">SDA: P4.0</text>
  <text x="320" y="185" font-size="8" fill="#2c3e50">SCL: P4.1</text>
  
  <text x="320" y="275" font-size="8" fill="#2c3e50">VCC: 5V</text>
  <text x="320" y="285" font-size="8" fill="#2c3e50">GND, Signal</text>
  
  <text x="580" y="190" font-size="8" fill="#2c3e50">PSoC ADC</text>
  <text x="580" y="200" font-size="8" fill="#2c3e50">SAR P0.0</text>
  
  <text x="880" y="290" font-size="8" fill="#2c3e50">INT0/INT1</text>
  <text x="880" y="300" font-size="8" fill="#2c3e50">PD2/PD3</text>
  
  <!-- Alimentación -->
  <rect x="50" y="500" width="1100" height="50" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1"/>
  <text x="600" y="520" text-anchor="middle" font-size="12" font-weight="bold" fill="#2c3e50">Alimentación</text>
  <text x="200" y="535" font-size="10" fill="#2c3e50">5V: YF-S401, ATmega328P</text>
  <text x="500" y="535" font-size="10" fill="#2c3e50">3.3V: MAX30100, BMP280, PSoC 5LP</text>
  <text x="850" y="535" font-size="10" fill="#2c3e50">Level Shifters para compatibilidad</text>
  
  <!-- Leyenda -->
  <rect x="50" y="600" width="300" height="150" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text x="200" y="620" text-anchor="middle" font-size="12" font-weight="bold" fill="#2c3e50">Leyenda de Conexiones</text>
  
  <line x1="70" y1="640" x2="120" y2="640" stroke="#e67e22" stroke-width="3"/>
  <text x="130" y="645" font-size="10" fill="#2c3e50">Bus I2C (SDA/SCL)</text>
  
  <line x1="70" y1="660" x2="120" y2="660" stroke="#16a085" stroke-width="3"/>
  <text x="130" y="665" font-size="10" fill="#2c3e50">Señal Digital (YF-S401)</text>
  
  <line x1="70" y1="680" x2="120" y2="680" stroke="#8e44ad" stroke-width="3"/>
  <text x="130" y="685" font-size="10" fill="#2c3e50">Comunicación PSoC-ATmega</text>
  
  <line x1="70" y1="700" x2="120" y2="700" stroke="#3498db" stroke-width="3"/>
  <text x="130" y="705" font-size="10" fill="#2c3e50">Comunicación PSoC-PC</text>
  
  <text x="70" y="730" font-size="9" fill="#e74c3c">Nota: Usar level shifters entre 5V y 3.3V</text>
</svg>